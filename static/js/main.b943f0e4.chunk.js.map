{"version":3,"sources":["App.js","index.js"],"names":["App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","e","setState","fio","target","value","orgsInfo","self","assertThisInitialized","setTimeout","axios","method","url","data","query","state","headers","Authorization","Content-Type","Accept","then","response","suggestions","map","item","isSelectShown","length","catch","error","console","log","handleSelectClick","arr","split","newItem","textInput","current","focus","handleSubmit","preventDefault","stopPropagation","inn","address","React","createRef","select","selectedItem","_this2","selectList","index","react_default","a","createElement","className","onClick","searchResult","onSubmit","type","ref","id","onChange","onKeyUp","handleKeyPress","placeholder","size","Component","ReactDOM","render","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.b943f0e4.chunk.js","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nexport default class App extends React.Component {\n  constructor() {\n    super();\n    this.textInput = React.createRef();\n    this.select = React.createRef();\n    this.state = {\n      fio: '',\n      suggestions: [],\n      selectedItem: null,\n      isSelectShown: false,\n      orgsInfo: null\n    }\n  }\n \n  handleChange = (e) => {\n    this.setState({ fio: e.target.value });\n    this.setState({ orgsInfo: null });\n\n    const self = this;\n    setTimeout(() => {\n      axios({\n        method: 'POST',\n        url: 'https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/fio',\n        data: {\n          query: self.state.fio\n        },\n        headers: {\n          \"Authorization\": \"Token b8678ebf716355f62ab8f0a9d2afcbe82ea155c6\",\n          \"Content-Type\": \"application/json; charset=UTF-8\",\n          \"Accept\": \"application/json\"\n        }\n      })\n        .then(function (response) {\n          const data = response.data.suggestions.map(item => item.value);\n          self.setState({ suggestions: data });\n          setTimeout(() => {\n            self.setState({ isSelectShown: self.state.suggestions.length > 0 });\n          }, 0);\n        })\n        .catch(function (error) {\n          console.log(error);\n        })\n    }, 0)\n  }\n\n  handleSelectClick = (item) => {\n    const arr = item.split(' ');\n    const newItem = arr.length === 3 ? item : item + ' ';\n    this.setState({ isSelectShown: arr.length !== 3 });\n    this.setState({ isSelectShown: false });\n    this.setState({ fio: newItem });\n    this.textInput.current.focus();\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({ isSelectShown: false });\n    const self = this;\n    axios({\n      method: 'POST',\n      url: 'https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party',\n      data: {\n        query: self.state.fio\n\n      },\n      headers: {\n        \"Authorization\": \"Token b8678ebf716355f62ab8f0a9d2afcbe82ea155c6\",\n        \"Content-Type\": \"application/json; charset=UTF-8\",\n        \"Accept\": \"application/json\"\n      }\n    })\n      .then(response => {\n        console.log('response', response)\n        const data = response.data.suggestions.map(item => {\n          return { value: item.value, inn: item.data.inn, address: item.data.address.value }\n        });\n        self.setState({ orgsInfo: data });\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n\n  render() {\n    const selectList = this.state.suggestions.map((item, index) =>\n      <div className=\"select-item\" onClick={() => this.handleSelectClick(item)}>{item}</div>\n    )\n\n    const searchResult = this.state.orgsInfo && this.state.orgsInfo.map(item =>\n      <div className=\"result\">\n        <div><span className=\"field-name\">Наименование:</span> {item.value}</div>\n        <div><span className=\"field-name\">ИНН:</span> {item.inn}</div>\n        <div><span className=\"field-name\">Адрес:</span> {item.address}</div>\n      </div>\n    )\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"input\">\n          <input type=\"text\"\n            ref={this.textInput}\n            id=\"fio\"\n            onChange={this.handleChange}\n            onKeyUp={this.handleKeyPress}\n            value={this.state.fio}\n            placeholder=\"Введите ФИО\"\n          /><button>Искать</button>\n        </div>\n        {\n          this.state.isSelectShown &&\n          <div ref={this.select} className=\"select-list\" size=\"11\">\n            <div className=\"select-item-sugg\">Выберите из списка или продолжайте вводить</div>\n            {selectList}\n          </div>\n        }\n        {\n          this.state.orgsInfo &&\n          searchResult\n        }\n        {\n          this.state.orgsInfo && this.state.orgsInfo.length === 0 &&\n          <div className=\"no-result\">По Вашему запросу ничего не найдено</div>\n        }\n      </form>\n    )\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}